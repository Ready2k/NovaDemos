<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Real-Time Voice Assistant</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="index.css">
</head>

<body>
  <div class="app-container">
    <div class="sidebar">
      <!-- Navigation Rail -->
      <div class="sidebar-nav">
        <!-- New Live/Home Item -->
        <div id="nav-live" class="nav-item active" data-tooltip="Live Session">
          <span style="font-size: 1.2rem;">ğŸ™ï¸</span>
        </div>

        <div id="nav-voice" class="nav-item" data-tooltip="Voice / General">
          <span style="font-size: 1.2rem;">ğŸšï¸</span>
        </div>
        <div id="nav-personas" class="nav-item" data-tooltip="Personas / Prompts">
          <span style="font-size: 1.2rem;">ğŸ‘¤</span>
        </div>
        <div id="nav-chat" class="nav-item" data-tooltip="Chat History">
          <span style="font-size: 1.2rem;">ğŸ’¬</span>
        </div>
        <div id="nav-workflows" class="nav-item" data-tooltip="Workflows">
          <span style="font-size: 1.2rem;">ğŸ“‚</span>
        </div>
        <div id="nav-tools" class="nav-item" data-tooltip="Tools">
          <span style="font-size: 1.2rem;">ğŸ› ï¸</span>
        </div>
        <div id="nav-knowledge" class="nav-item" data-tooltip="Knowledge Bases">
          <span style="font-size: 1.2rem;">ğŸ“š</span>
        </div>
        <div id="nav-settings" class="nav-item" style="margin-top: auto;" data-tooltip="System Settings">
          <span style="font-size: 1.2rem;">âš™ï¸</span>
        </div>
        <div id="nav-action-save" class="nav-item action-item" data-tooltip="Save Changes">
          <span style="font-size: 1.2rem;">ğŸ’¾</span>
        </div>
        <div id="nav-action-new" class="nav-item action-item" data-tooltip="New Session">
          <span style="font-size: 1.2rem;">âœ¨</span>
        </div>
      </div>

      <!-- Sidebar Content -->
      <div class="sidebar-content">

        <!-- View: Live Session -->
        <div id="view-live" class="sidebar-view active">
          <h2>Live Session</h2>
          <div
            style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
            <p style="margin: 0; color: #94a3b8; font-size: 0.9rem;">
              Ready to interact. Use the controls in the main panel to start/stop the session.
            </p>
            <div style="margin-top: 15px; font-size: 0.8rem; color: #64748b;">
              <div style="display:flex; justify-content: space-between; margin-bottom: 15px; align-items: center;">
                <span style="font-weight: 600;">Current Status:</span>
                <span id="live-status-indicator" class="status-badge disconnected"
                  style="font-size: 0.75rem;">Disconnected</span>
              </div>

              <div id="live-workflow-status" style="margin-top: 15px; display: none;">
                <div
                  style="font-size: 0.75rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 8px;">
                  Current Step</div>
                <div id="sidebar-step-name"
                  style="font-size: 0.95rem; color: #cbd5e1; font-weight: 600; margin-bottom: 10px;">Waiting...</div>

                <div id="sidebar-requirements" style="display: flex; flex-direction: column; gap: 6px;">
                  <!-- Injected items -->
                </div>
                <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin: 15px 0;">
              </div>

              <div id="live-moments-header" style="display: none;">
                <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin-bottom: 15px;">
                <h4 style="margin: 0 0 10px 0; font-size: 0.85rem; color: #e2e8f0;">Key Moments</h4>
              </div>

              <div id="live-moments-list" class="moments-list">
                <!-- Moments will be injected here -->
              </div>
            </div>
          </div>
        </div>

        <!-- View: Voice / General Settings -->
        <div id="view-voice" class="sidebar-view">
          <h2>General Settings</h2>

          <div class="input-group">
            <label for="interaction-mode">Interaction Mode</label>
            <select id="interaction-mode">
              <option value="chat_voice" selected>âœ¨ Chat + Voice</option>
              <option value="voice_only">ğŸ¤ Voice Only</option>
              <option value="chat_only">ğŸ’¬ Chat Only</option>
            </select>
          </div>

          <div class="input-group">
            <label for="persona-preset">Persona Preset</label>
            <select id="persona-preset">
              <option value="">Custom / Select Preset...</option>
            </select>
          </div>



          <div class="input-group">
            <label for="brain-mode">Assistant</label>
            <select id="brain-mode">
              <option value="raw_nova">âœ¨ Nova Sonic (Direct)</option>
              <option value="bedrock_agent">ğŸ¦ Banking Bot (Agent)</option>
            </select>
          </div>

          <div class="input-group">
            <label for="voice-preset">Voice</label>
            <select id="voice-preset">
              <!-- Populated by JS -->
            </select>
          </div>

          <div class="input-group"
            style="display: flex; align-items: center; gap: 10px; margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
            <input type="checkbox" id="enable-guardrails" checked
              style="width: auto; accent-color: var(--accent-color); cursor: pointer;">
            <label for="enable-guardrails" style="margin: 0; cursor: pointer; flex: 1;">
              <div style="font-weight: 600; margin-bottom: 2px;">Enable Core Guardrails</div>
              <div style="font-size: 0.75rem; color: #94a3b8; line-height: 1.3;">System-level quality and safety rules
                that apply to all personas</div>
            </label>
          </div>
        </div>

        <!-- View: Personas / Prompts -->
        <div id="view-personas" class="sidebar-view">
          <h2>Prompts & Personas</h2>

          <div class="input-group">
            <label for="prompt-preset">Prompt Preset</label>
            <select id="prompt-preset">
              <option value="">Custom / Select Preset...</option>
            </select>
          </div>

          <div class="input-group">
            <label for="system-prompt">System Prompt</label>
            <textarea id="systemPrompt"
              rows="12">You are a warm, professional, and helpful AI assistant. Give accurate answers that sound natural, direct, and human. Start by answering the user's question clearly in 1â€“2 sentences. Then, expand only enough to make the answer understandable, staying within 3â€“5 short sentences total. Avoid sounding like a lecture or essay.</textarea>
          </div>

          <div class="form-group">
            <label for="speechPrompt">Speech Prompt (Optional)</label>
            <textarea id="speechPrompt" rows="4"
              placeholder="e.g. If the input audio/speech contains hindi..."></textarea>
          </div>

          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button id="save-btn" class="primary-btn" disabled
              style="flex: 1; justify-content: center; background: rgba(16, 185, 129, 0.2); border: 1px solid rgba(16, 185, 129, 0.4); opacity: 0.5; cursor: not-allowed;">
              ğŸ’¾ Save
            </button>
            <button id="sync-btn" class="secondary-btn"
              style="flex: 1; justify-content: center; background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.4);">
              ğŸ”„ Sync
            </button>
          </div>
        </div>

        <!-- View: Chat History -->
        <div id="view-chat" class="sidebar-view">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h2 style="margin: 0; margin-bottom: 10px;">Chat History</h2>
            <div class="chat-filters" style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px;">

              <!-- Search -->
              <div class="input-group" style="margin-bottom: 0;">
                <input type="text" id="history-search" placeholder="Search history..."
                  style="width: 100%; box-sizing: border-box; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; padding: 8px; color: white; font-size: 0.85rem;">
              </div>

              <!-- Date -->
              <div class="input-group" style="margin-bottom: 0;">
                <input type="date" id="history-date-filter"
                  style="width: 100%; box-sizing: border-box; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; padding: 8px; color: white; font-size: 0.85rem; color-scheme: dark;">
              </div>

              <!-- Checkbox -->
              <div style="display: flex; align-items: center; gap: 8px; padding-left: 2px;">
                <input type="checkbox" id="history-final-checkbox"
                  style="accent-color: var(--accent-color); cursor: pointer;">
                <label for="history-final-checkbox"
                  style="font-size: 0.85rem; color: #cbd5e1; cursor: pointer; user-select: none;">
                  Show Final Answer Only
                </label>
              </div>

            </div>

          </div>
          <div id="chat-history-list" style="display: flex; flex-direction: column; gap: 10px;">
            <!-- Placeholder for history items -->
            <div
              style="padding: 12px; background: rgba(255,255,255,0.05); border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); cursor: pointer;">
              <div style="font-size: 0.85rem; font-weight: 600; color: #e2e8f0;">Today, 10:42 AM</div>
              <div
                style="font-size: 0.75rem; color: #94a3b8; margin-top: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                User: Hello, how are you?</div>
            </div>
            <p style="color: #64748b; font-size: 0.8rem; font-style: italic; text-align: center; margin-top: 20px;">
              History implementation pending...</p>
          </div>
        </div>

        <!-- View: Workflows -->
        <div id="view-workflows" class="sidebar-view">
          <h2>Workflows</h2>

          <a href="workflow.html" class="secondary-btn"
            style="width: 100%; justify-content: center; background: rgba(139, 92, 246, 0.2); border: 1px solid rgba(139, 92, 246, 0.4); text-decoration: none; display: flex; align-items: center; padding: 16px;">
            ğŸ•¸ï¸ Visualize Flow
          </a>

          <a href="workflow-editor.html" class="secondary-btn"
            style="width: 100%; justify-content: center; background: rgba(16, 185, 129, 0.2); border: 1px solid rgba(16, 185, 129, 0.4); text-decoration: none; display: flex; align-items: center; padding: 16px;">
            âœï¸ Workflow Creator
          </a>

          <p style="margin-top: 20px; font-size: 0.85rem; color: #94a3b8; line-height: 1.5;">
            Manage and visualize your agent workflows here. Use the Creator to build new flows or the Visualizer to
            see
            them in action.
          </p>

          <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin: 20px 0;">

          <h3>ğŸ”— Workflow Coupler</h3>
          <div class="input-group">
            <label>Linked Workflows</label>
            <div id="workflow-coupler-list"
              style="display: flex; flex-direction: column; gap: 8px; max-height: 300px; overflow-y: auto; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.1);">
              <div style="font-size: 0.8rem; color: #64748b; font-style: italic;">Loading workflows...</div>
            </div>
            <div style="font-size: 0.75rem; color: #94a3b8; margin-top: 4px;">Select workflows to link to the active
              Persona.</div>
          </div>
        </div>

        <!-- View: Tools -->
        <div id="view-tools" class="sidebar-view">
          <h2>Tools Configuration</h2>

          <a href="tool-manager.html" class="secondary-btn"
            style="width: 100%; justify-content: center; background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.4); text-decoration: none; display: flex; align-items: center; margin-bottom: 20px;">
            ğŸ› ï¸ Manage / Create Tools
          </a>

          <h4 style="margin: 0 0 10px 0; font-size: 0.9rem; color: #94a3b8;">Enabled Tools (Global)</h4>
          <div style="display: flex; gap: 8px; margin-bottom: 10px;">
            <button id="tools-select-all" class="secondary-btn" style="padding: 4px 8px; font-size: 0.75rem;">Select
              All</button>
            <button id="tools-deselect-all" class="secondary-btn" style="padding: 4px 8px; font-size: 0.75rem;">Deselect
              All</button>
          </div>
          <div id="tools-list" style="display: flex; flex-direction: column; gap: 8px;">
            <!-- Populated by JS -->
            <div style="font-size: 0.8rem; color: #64748b; font-style: italic;">Loading tools...</div>
          </div>
        </div>

        <!-- View: Knowledge Bases -->
        <div id="view-knowledge" class="sidebar-view">
          <h2>Knowledge Bases</h2>

          <div id="kbList" style="margin-bottom: 20px; display: flex; flex-direction: column; gap: 10px;">
            <!-- Populated by JS -->
            <div style="font-size: 0.8rem; color: #64748b; font-style: italic;">Loading KBs...</div>
          </div>

          <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin-bottom: 20px;">

          <h4 style="margin: 0 0 10px 0; font-size: 1rem;">Add Knowledge Base</h4>

          <div class="input-group">
            <label for="newKbName">Name</label>
            <input type="text" id="newKbName" placeholder="e.g. Mortgage Policy KB"
              style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
          </div>

          <div class="input-group">
            <label for="newKbId">Knowledge Base ID</label>
            <input type="text" id="newKbId" placeholder="e.g. KCDO7ZUFA1"
              style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
          </div>

          <div class="input-group">
            <label for="newKbModel">Model</label>
            <select id="newKbModel"
              style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
              <option value="">Loading models...</option>
            </select>
          </div>

          <button id="addKbBtn" class="primary-btn" style="width: 100%; justify-content: center;">Add Knowledge
            Base</button>
        </div>

        <!-- View: Settings (System) -->
        <div id="view-settings" class="sidebar-view">
          <h2>System Settings</h2>

          <div class="input-group" style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
            <input type="checkbox" id="debug-mode" style="width: auto;">
            <label for="debug-mode" style="margin: 0; cursor: pointer;">Show Debug Panel</label>
          </div>

          <button id="awsConfigBtn" class="secondary-btn"
            style="width: 100%; justify-content: center; background: rgba(99, 102, 241, 0.2); border: 1px solid rgba(99, 102, 241, 0.4); margin-bottom: 10px;">
            ğŸ” Configure AWS
          </button>

          <button id="agentConfigBtn" class="secondary-btn"
            style="width: 100%; justify-content: center; background: rgba(16, 185, 129, 0.2); border: 1px solid rgba(16, 185, 129, 0.4); margin-bottom: 20px;">
            ğŸ¤– Configure Custom Agents
          </button>

          <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin: 20px 0;">

          <h3 style="margin: 0 0 15px 0; font-size: 1rem; color: #e2e8f0;">ğŸ’° Cost Configuration</h3>
          <p style="font-size: 0.85rem; color: #94a3b8; margin-bottom: 15px; line-height: 1.4;">Configure pricing per
            1,000 tokens to track session costs in real-time.</p>

          <h4 style="margin: 0 0 10px 0; font-size: 0.9rem; color: #cbd5e1;">Nova Sonic (Direct)</h4>
          <div class="input-group" style="margin-bottom: 10px;">
            <label for="nova-input-cost">Input Cost (per 1K tokens)</label>
            <input type="number" id="nova-input-cost" step="0.000001" placeholder="0.000003" value="0.000003"
              style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white; font-size: 0.9rem;">
          </div>
          <div class="input-group" style="margin-bottom: 20px;">
            <label for="nova-output-cost">Output Cost (per 1K tokens)</label>
            <input type="number" id="nova-output-cost" step="0.000001" placeholder="0.000012" value="0.000012"
              style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white; font-size: 0.9rem;">
          </div>

          <h4 style="margin: 0 0 10px 0; font-size: 0.9rem; color: #cbd5e1;">Bedrock Agent (with LLM)</h4>
          <div class="input-group" style="margin-bottom: 10px;">
            <label for="agent-input-cost">Input Cost (per 1K tokens)</label>
            <input type="number" id="agent-input-cost" step="0.000001" placeholder="0.000003" value="0.000003"
              style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white; font-size: 0.9rem;">
          </div>
          <div class="input-group" style="margin-bottom: 20px;">
            <label for="agent-output-cost">Output Cost (per 1K tokens)</label>
            <input type="number" id="agent-output-cost" step="0.000001" placeholder="0.000012" value="0.000012"
              style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white; font-size: 0.9rem;">
          </div>

          <button id="saveCostConfigBtn" class="primary-btn" style="width: 100%; justify-content: center;">
            ğŸ’¾ Save Cost Configuration
          </button>
        </div>



      </div>
    </div>

    <div class="main-content">
      <header>
        <h1>
          ğŸ™ï¸ Voice Assistant
          <span id="mode-indicator"
            style="font-size: 0.8rem; background: rgba(255,255,255,0.1); padding: 4px 8px; border-radius: 6px; vertical-align: middle; margin-left: 10px; color: #94a3b8; font-weight: normal;">Mode:
            Nova Sonic</span>
        </h1>
        <div class="header-right">
          <div id="version-info" class="version-badge">
            Loading version...
          </div>
          <div id="status" class="status-badge disconnected">
            Disconnected
          </div>
        </div>
      </header>

      <div class="visualizer">
        <div id="sessionStats" class="session-stats">
          <div class="stat-item" title="Session Duration">â±ï¸ <span class="stat-label">Duration:</span> <span
              id="statDuration">00:00</span></div>
          <div class="stat-item" title="Input Tokens">ğŸ“¥ <span class="stat-label">Input:</span> <span
              id="statInputTokens">0</span></div>
          <div class="stat-item" title="Output Tokens">ğŸ“¤ <span class="stat-label">Output:</span> <span
              id="statOutputTokens">0</span></div>
          <div class="stat-item" title="Session Cost">ğŸ’° <span class="stat-label">Cost:</span> <span
              id="statCost">$0.00</span></div>
        </div>
        <canvas id="visualizer"></canvas>
      </div>

      <div class="transcript-container" id="transcript">
        <div id="chat-container">
          <!-- Messages will appear here -->
        </div>
      </div>

      <div class="chat-input-container">
        <input type="text" id="textInput" placeholder="Type a message..." disabled>
        <button id="sendBtn" class="icon-btn" disabled>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" />
          </svg>
        </button>
      </div>

      <div class="controls">
        <button id="connectBtn" class="primary-btn">Connect</button>
        <button id="startBtn" class="primary-btn" disabled>Start Recording</button>
        <button id="stopBtn" class="danger-btn" disabled>Stop Recording</button>
        <button id="disconnectButton" class="danger-btn" disabled>Disconnect</button>
      </div>
    </div>

    <!-- Debug Panel -->
    <div id="debug-panel" class="debug-sidebar" style="display: none;">
      <h3
        style="margin-top: 0; color: #fff; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; margin-bottom: 15px;">
        ğŸ› ï¸ Debug Panel</h3>

      <!-- Persistent Metrics Panel (Sticky) -->
      <div id="live-metrics-panel"
        style="margin-bottom: 15px; padding: 10px; background: rgba(0, 0, 0, 0.3); border-radius: 6px; border: 1px solid rgba(255, 255, 255, 0.05); font-size: 0.8rem; display: none;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
          <span style="color: #94a3b8;">Tokens (Total):</span>
          <span id="debug-tokens" style="color: #cbd5e1;">0</span>
        </div>
      </div>

      <div id="debug-content">Waiting for interaction...</div>
    </div>

    <div id="toast-container"></div>
  </div>

  <script src="audio.js"></script>
  <script type="module" src="main.js"></script>

  <!-- AWS Config Modal -->
  <div id="awsModal" class="modal"
    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
    <div class="modal-content"
      style="background: #1e293b; padding: 25px; border-radius: 12px; width: 90%; max-width: 400px; border: 1px solid rgba(255,255,255,0.1);">
      <h3 style="margin-top: 0; margin-bottom: 15px;">AWS Configuration</h3>
      <p style="font-size: 0.9rem; color: #94a3b8; margin-bottom: 20px;">Enter your AWS credentials. These are used
        only
        for this session and are not saved to the server.</p>

      <div class="input-group" style="margin-bottom: 15px;">
        <label for="awsAccessKey">Access Key ID</label>
        <input type="password" id="awsAccessKey" placeholder="AKIA..."
          style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
      </div>

      <div class="input-group" style="margin-bottom: 15px;">
        <label for="awsSecretKey">Secret Access Key</label>
        <input type="password" id="awsSecretKey" placeholder="wJalrX..."
          style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
      </div>

      <div class="input-group" style="margin-bottom: 15px;">
        <label for="awsSessionToken">Session Token (Optional)</label>
        <input type="password" id="awsSessionToken" placeholder="IQoJb3JpZ2luX2Vj..."
          style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
      </div>

      <div class="input-group" style="margin-bottom: 15px;">
        <label for="awsRegion">Region</label>
        <input type="text" id="awsRegion" value="us-east-1" placeholder="us-east-1"
          style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
      </div>

      <div class="input-group" style="margin-bottom: 15px;">
        <label for="novaSonicModelId">Nova Sonic Model ID</label>
        <input type="text" id="novaSonicModelId" value="amazon.nova-2-sonic-v1:0" placeholder="amazon.nova-2-sonic-v1:0"
          style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
      </div>

      <div class="input-group" style="margin-bottom: 20px;">
        <label for="agentCoreRuntimeArn">Agent Core Runtime ARN (Optional)</label>
        <input type="text" id="agentCoreRuntimeArn" placeholder="arn:aws:bedrock-agentcore:..."
          style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
      </div>

      <div class="modal-actions" style="display: flex; gap: 10px; justify-content: space-between;">
        <button id="clearAwsBtn" class="danger-btn" style="font-size: 0.85rem;">Clear Stored</button>
        <div style="display: flex; gap: 10px;">
          <button id="cancelAwsBtn" class="secondary-btn">Cancel</button>
          <button id="saveAwsBtn" class="primary-btn">Update Credentials</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Agent Config Modal -->
  <div id="agentModal" class="modal"
    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
    <div class="modal-content"
      style="background: #1e293b; padding: 25px; border-radius: 12px; width: 90%; max-width: 500px; border: 1px solid rgba(255,255,255,0.1); max-height: 90vh; overflow-y: auto;">
      <h3 style="margin-top: 0; margin-bottom: 15px;">Configure Bedrock Agents</h3>
      <p style="font-size: 0.9rem; color: #94a3b8; margin-bottom: 20px;">Add custom Bedrock Agents. These settings
        override local .env configuration.</p>

      <!-- Existing Agents List -->
      <div id="agentList" style="margin-bottom: 20px; display: flex; flex-direction: column; gap: 10px;">
        <!-- Populated by JS -->
      </div>

      <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin-bottom: 20px;">

      <h4 style="margin: 0 0 10px 0; font-size: 1rem;">Add New Agent</h4>

      <div class="input-group" style="margin-bottom: 15px;">
        <label for="newAgentName">Agent Name</label>
        <input type="text" id="newAgentName" placeholder="e.g. Travel Assistant"
          style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
      </div>

      <div class="input-group" style="margin-bottom: 15px;">
        <label for="newAgentId">Agent ID</label>
        <input type="text" id="newAgentId" placeholder="e.g. XXXXXXXXXX"
          style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
      </div>

      <div class="input-group" style="margin-bottom: 20px;">
        <label for="newAgentAliasId">Agent Alias ID</label>
        <input type="text" id="newAgentAliasId" placeholder="e.g. TSTALIASID"
          style="width: 100%; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: white;">
      </div>

      <div class="modal-actions" style="display: flex; gap: 10px; justify-content: flex-end;">
        <button id="closeAgentBtn" class="secondary-btn">Close</button>
        <button id="addAgentBtn" class="primary-btn">Add Agent</button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div id="deleteConfirmModal" class="modal"
    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1100; align-items: center; justify-content: center;">
    <div class="modal-content"
      style="background: #1e293b; padding: 25px; border-radius: 12px; width: 90%; max-width: 400px; border: 1px solid rgba(255,255,255,0.1); text-align: center;">
      <h3 style="margin-top: 0; margin-bottom: 15px; color: white;">Confirm Deletion</h3>
      <p id="deleteConfirmText" style="font-size: 0.9rem; color: #94a3b8; margin-bottom: 25px;">
        Are you sure you want to delete this agent?
      </p>
      <div class="modal-actions" style="display: flex; gap: 10px; justify-content: center;">
        <button id="cancelDeleteBtn" class="secondary-btn">Cancel</button>
        <button id="confirmDeleteBtn" class="danger-btn">Delete</button>
      </div>
    </div>
  </div>
</body>

</html>