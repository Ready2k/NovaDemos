<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Real-Time Voice Assistant</title>
  <link rel="stylesheet" href="index.css">
</head>

<body>
  <div class="app-container">
    <div class="sidebar">
      <h2>Persona Settings</h2>
      <div class="input-group">
        <label for="interaction-mode">Interaction Mode</label>
        <select id="interaction-mode">
          <option value="chat_voice" selected>âœ¨ Chat + Voice</option>
          <option value="voice_only">ğŸ¤ Voice Only</option>
          <option value="chat_only">ğŸ’¬ Chat Only</option>
        </select>
      </div>

      <div class="input-group">
        <label for="persona-preset">Persona Preset</label>
        <select id="persona-preset">
          <option value="">Custom / Select Preset...</option>
        </select>
      </div>

      <div class="input-group">
        <label for="voice-preset">Voice</label>
        <select id="voice-preset">
          <!-- Populated by JS -->
        </select>
      </div>

      <div class="input-group">
        <label for="system-prompt">System Prompt</label>
        <textarea id="systemPrompt"
          rows="6">You are a warm, professional, and helpful AI assistant. Give accurate answers that sound natural, direct, and human. Start by answering the user's question clearly in 1â€“2 sentences. Then, expand only enough to make the answer understandable, staying within 3â€“5 short sentences total. Avoid sounding like a lecture or essay.</textarea>
      </div>
      <div class="form-group">
        <label for="speechPrompt">Speech Prompt (Optional)</label>
        <textarea id="speechPrompt" rows="4" placeholder="e.g. If the input audio/speech contains hindi..."></textarea>
      </div>
      <button id="saveSettingsBtn" class="secondary-btn">Save Settings</button>
      <button id="newSessionBtn" class="danger-btn" style="margin-top: 10px;">New Session</button>
    </div>

    <div class="main-content">
      <header>
        <h1>ğŸ™ï¸ Voice Assistant</h1>
        <div id="status" class="status-badge disconnected">
          Disconnected
        </div>
      </header>

      <div class="visualizer">
        <div id="sessionStats" class="session-stats">
          <div class="stat-item" title="Session Duration">â±ï¸ <span class="stat-label">Duration:</span> <span
              id="statDuration">00:00</span></div>
          <div class="stat-item" title="Input Tokens">ğŸ“¥ <span class="stat-label">Input:</span> <span
              id="statInputTokens">0</span></div>
          <div class="stat-item" title="Output Tokens">ğŸ“¤ <span class="stat-label">Output:</span> <span
              id="statOutputTokens">0</span></div>
          <div class="stat-item" title="Latency">âš¡ <span class="stat-label">Latency:</span> <span
              id="statLatency">-</span></div>
        </div>
        <canvas id="visualizer"></canvas>
      </div>

      <div class="transcript-container" id="transcript">
        <div class="transcript-empty">Transcript will appear here...</div>
      </div>

      <div class="chat-input-container">
        <input type="text" id="textInput" placeholder="Type a message..." disabled>
        <button id="sendBtn" class="icon-btn" disabled>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" />
          </svg>
        </button>
      </div>

      <div class="controls">
        <button id="connectBtn" class="primary-btn">Connect</button>
        <button id="startBtn" class="primary-btn" disabled>Start Recording</button>
        <button id="stopBtn" class="danger-btn" disabled>Stop Recording</button>
        <button id="disconnectButton" class="danger-btn" disabled>Disconnect</button>
      </div>
    </div>

    <div id="toast-container"></div>
  </div>

  <script src="audio.js"></script>
  <script src="main.js"></script>
</body>

</html>