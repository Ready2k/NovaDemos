<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Real-Time Voice Assistant</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 40px;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    h1 {
      color: #333;
      font-size: 28px;
      margin-bottom: 10px;
      text-align: center;
    }

    .subtitle {
      color: #666;
      font-size: 14px;
      text-align: center;
      margin-bottom: 30px;
    }

    .status {
      padding: 12px 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .status::before {
      content: '';
      width: 10px;
      height: 10px;
      border-radius: 50%;
      display: inline-block;
    }

    .status.disconnected {
      background: #fee;
      color: #c33;
    }

    .status.disconnected::before {
      background: #c33;
    }

    .status.connected {
      background: #efe;
      color: #373;
    }

    .status.connected::before {
      background: #373;
      animation: pulse 2s infinite;
    }

    .status.recording {
      background: #ffeaa7;
      color: #d63031;
    }

    .status.recording::before {
      background: #d63031;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0.3;
      }
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 20px;
    }

    button {
      padding: 14px 24px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    button:active {
      transform: translateY(0);
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    #connectBtn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    #startBtn {
      background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
      color: white;
    }

    #stopBtn {
      background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
      color: white;
    }

    .visualizer {
      height: 80px;
      background: #f5f5f7;
      border-radius: 10px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }

    .visualizer canvas {
      width: 100%;
      height: 100%;
    }

    .log {
      background: #f5f5f7;
      border-radius: 10px;
      padding: 15px;
      max-height: 200px;
      overflow-y: auto;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 12px;
    }

    .log-entry {
      padding: 4px 0;
      color: #333;
      border-bottom: 1px solid #e0e0e0;
    }

    .log-entry:last-child {
      border-bottom: none;
    }

    .log-entry .timestamp {
      color: #999;
      margin-right: 8px;
    }

    .log-entry.error {
      color: #c33;
    }

    .log-entry.success {
      color: #373;
    }

    .transcript {
      background: #f5f5f7;
      border-radius: 10px;
      padding: 15px;
      max-height: 150px;
      overflow-y: auto;
      font-size: 14px;
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .transcript-entry {
      padding: 8px 0;
      border-bottom: 1px solid #e0e0e0;
    }

    .transcript-entry:last-child {
      border-bottom: none;
    }

    .transcript-entry .role {
      font-weight: 600;
      color: #667eea;
      margin-right: 8px;
    }

    .transcript-entry.assistant .role {
      color: #764ba2;
    }

    .transcript-empty {
      color: #999;
      font-style: italic;
      text-align: center;
    }

    .app-wrapper {
      display: flex;
      gap: 20px;
      max-width: 1000px;
      width: 100%;
      align-items: flex-start;
    }

    .sidebar {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      width: 350px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      height: fit-content;
    }

    .sidebar h2 {
      font-size: 20px;
      margin-bottom: 20px;
      color: #333;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #666;
      font-size: 14px;
    }

    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #e0e0e0;
      border-radius: 10px;
      font-family: inherit;
      font-size: 14px;
      resize: vertical;
      background: #f5f5f7;
      transition: all 0.3s ease;
    }

    .form-group textarea:focus {
      outline: none;
      border-color: #667eea;
      background: white;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .secondary-btn {
      background: #f0f0f0;
      color: #333;
      border: 1px solid #ddd;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      width: 100%;
      transition: all 0.3s ease;
    }

    .secondary-btn:hover {
      background: #e0e0e0;
      transform: translateY(-1px);
    }

    .container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 40px;
      flex: 1;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }
  </style>
</head>

<body>
  <div class="app-wrapper">
    <div class="sidebar">
      <h2>Persona Settings</h2>
      <div class="form-group">
        <label for="systemPrompt">System Prompt</label>
        <textarea id="systemPrompt"
          rows="10">You are a warm, professional, and helpful AI assistant. Give accurate answers that sound natural, direct, and human. Start by answering the user's question clearly in 1‚Äì2 sentences. Then, expand only enough to make the answer understandable, staying within 3‚Äì5 short sentences total. Avoid sounding like a lecture or essay.</textarea>
      </div>
      <div class="form-group">
        <label for="speechPrompt">Speech Prompt (Optional)</label>
        <textarea id="speechPrompt" rows="4" placeholder="e.g. If the input audio/speech contains hindi..."></textarea>
      </div>
      <button id="saveSettingsBtn" class="secondary-btn">Save Settings</button>
    </div>

    <div class="container">
      <h1>üéôÔ∏è Voice Assistant</h1>
      <p class="subtitle">Real-time speech-to-speech with Amazon Nova Sonic</p>

      <div id="status" class="status disconnected">
        Disconnected
      </div>

      <div class="visualizer">
        <canvas id="visualizer"></canvas>
      </div>

      <div class="controls">
        <button id="connectBtn">Connect</button>
        <button id="startBtn" disabled>Start Recording</button>
        <button id="stopBtn" disabled>Stop Recording</button>
        <button id="disconnectButton" disabled style="background-color: #ef4444; margin-left: 10px;">Disconnect</button>
      </div>

      <div class="transcript" id="transcript">
        <div class="transcript-empty">Transcript will appear here...</div>
      </div>

      <div class="log" id="log">
        <div class="log-entry">
          <span class="timestamp">--:--:--</span>
          <span>Ready to connect...</span>
        </div>
      </div>
    </div>

    <script src="audio.js"></script>
    <script src="main.js"></script>
</body>

</html>